<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<script src="http://qunarzz.com/jquery/prd/jquery-1.10.1.js" charset="utf-8"></script>
		<style>
.body{
	margin: 10px auto;
	text-align: center;
}
#birth{
	width: 98%;
	line-height: 36px;
}
.btn{
	margin: 10px 5px;
	border-radius: 4px;
	background: #f50;
	color: #fff;
	line-height: 48px;
	font-size: 24px;
	text-align: center;
}
#ctn{
	border: solid 5px #eee;
	background: #eee;
}
.block{
	width: 12px;
	height: 12px;
	border: solid 1px #eee;
	float: left;
	background: #fff;
}
.block-inner{
	width: 12px;
	height: 12px;
	background: #f50;
	display: none;
}
		</style>
		<style id="append-styles">

		</style>
		<title></title>
	</head>
	<body>
		<div class="body">
			<input type="text" id="birth" placeholder="your birthday here">
			<div class="btn">SHOW ME</div>
			<div id="ctn"></div>
		</div>
		<script type="text/javascript">
function rebuildStyles(){
	var outWidth = window.innerWidth - 40
	var ctnWidth = outWidth - 10
	var blockSize = ctnWidth/30-2
	var styleLines = [
		'.body{width:'+outWidth+'px;}',
		'#ctn{width:'+ctnWidth+'px;}',
		'.block,.block-inner{width:'+blockSize+'px;height:'+blockSize+'px;}'
	]
	$('#append-styles').html(styleLines.join(''))
}
rebuildStyles()
$(window).on('resize',rebuildStyles)
var blocks = []
for(var i=0; i<960; i++){
	var block = $('<div class="block"><div class="block-inner"></div></div>').appendTo($('#ctn'))
	blocks.push(block)
}
$('<div style="clear:both"></div>').appendTo($('#ctn'))

$('#birth').keyup(function(e){
	if(e.keyCode == 13){
		render(this.value)
	}
})

$('.btn').click(function(){render($('#birth').val())})

function render(birth){
	var ALL = 80*12
	birth = new Date(birth)
	var now = new Date()
	var pass = (now.getYear() - birth.getYear())*12 + now.getMonth() - birth.getMonth()
	if(pass<0){
		alert('Hi, future BABY!')
		return
	}else if(pass>ALL){
		alert('Hi, GRANDPA!')
		return
	}else if(isNaN(pass)){
		alert('Invalid birthday!')
		return
	}
	passing = 0
	renderblock()
	function renderblock(){
		if(passing<pass){
			blocks[passing++].children().fadeIn(500)
			setTimeout(renderblock,30)
		}
	}
}

		</script>
	</body>
</html>
